name: moodle-hackwae-lite

services:
  db:
    image: mariadb:10.6
    restart: unless-stopped
    mem_limit: 256m
    cpus: 0.5
    environment:
      MYSQL_DATABASE: moodle
      MYSQL_USER: moodle
      MYSQL_PASSWORD: m00dle
      MYSQL_ROOT_PASSWORD: m00dle
    volumes:
      - type: bind
        source: /DATA/AppData/moodle-db
        target: /var/lib/mysql
        bind:
          create_host_path: true
    networks:
      - moodle

  app:
    image: prasta/moodle:latest
    restart: unless-stopped
    mem_limit: 1024m
    cpus: 1.0
    depends_on:
      - db
    ports:
      - target: 80
        published: "8484"
        protocol: tcp
    volumes:
      - type: bind
        source: /DATA/AppData/moodledata
        target: /var/www/moodledata
        bind:
          create_host_path: true
    networks:
      - moodle

networks:
  moodle:

x-casaos:
  architectures:
    - amd64
    - arm64
  author: HackWae
  category: Education
  description:
    en_us: Self-hosted Moodle LMS (Low Resource Mode)
  developer: HackWae
  icon: https://raw.githubusercontent.com/WaeTechDesign/casaos-appstore/main/Apps/icon/Moodle%20Icon.png
  index: /
  main: app
  port_map: "8484"
  scheme: http
  store_app_id: moodle-hackwae-lite
  thumbnail: https://raw.githubusercontent.com/WaeTechDesign/casaos-appstore/main/Apps/icon/Moodle%20Icon.png
  title:
    en_us: Moodle HackWae Lite
  webui: http://[HOST]:[PORT]
